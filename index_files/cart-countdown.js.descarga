customElements.get("foxkit-cart-countdown")||customElements.define("foxkit-cart-countdown",class extends HTMLElement{constructor(){super(),this.config=window.FoxKitPlugins.CartCountdown}connectedCallback(){window.FoxKitThemeHelperEnabled&&(this.dataset.plugin="CartCountdown",this.classList.add("foxkit-cart-countdown"),this.config.show_on_drawer||this.classList.add("hide-on-drawer"),this.renderComponent(),this.initTimer(),window.FoxkitEvents.subscribe("ON_FOXKIT_CART_UPDATE",(n=>this.onCartUpdate(n))))}disconnectedCallback(){window.FoxkitEvents.unSubscribe("ON_FOXKIT_CART_UPDATE",(n=>this.onCartUpdate(n)))}initTimer(){const n=this.querySelector("[data-countdown-message]"),t=Date.now(),s=Number(this.config.duration)||5,i=window.__i18n.transPlugin({configs:this.config,key:"message_out"}),e=t+60*s*1e3;this.timer=new FoxKitModules.CountdownTimer(this,t,e,{addZeroPrefix:!1,loop:this.config.repeat,callback:()=>{!this.config.repeat&&i&&(n.innerHTML=i,this.classList.add("time-out"))}})}onCartUpdate(n){const t=0===n.item_count?"add":"remove";this.classList[t]("!foxkit-hidden")}renderComponent(){const n=window.__i18n.transPlugin({configs:this.config,key:"message"}),t=window.__i18n.transPlugin({configs:this.config,key:"mins_label",defaultValue:"m"}),s=window.__i18n.transPlugin({configs:this.config,key:"secs_label",defaultValue:"s"}),i=n?n.replace("{{timer}}",`<strong class="foxkit-cart-countdown__timer">\n                <span class="countdown-timer-minute" data-countdown-min="">0</span>\n                <span class="countdown-timer__label countdown-timer__label-min">${t}</span>\n                <span class="countdown-timer-sec" data-countdown-sec="">0</span>\n                <span class="countdown-timer__label countdown-timer__label-second">${s}</span>\n            </strong>`):"";this.innerHTML=`<div data-countdown-message><span class="fire">ðŸ”¥</span> ${i}</div>`}});